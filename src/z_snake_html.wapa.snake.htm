<!DOCTYPE html>                                                                                                                                                                                                                                                
<html xmlns="http://www.w3.org/1999/xhtml">                                                                                                                                                                                                                    
<head>                                                                                                                                                                                                                                                         
  <script language="Javascript">                                                                                                                                                                                                                               
    var gEventStr   = "";                                                                                                                                                                                                                                      
    var gSocketAddr = "<%=zcl_eezz_helper=>create_apc_url( ) %>";                                                                                                                                                                                              
  </script>                                                                                                                                                                                                                                                    
  <script src="/sap/bc/bsp/sap/z_eezz_html/websocket.js" type="text/javascript"></script>                                                                                                                                                                      
                                                                                                                                                                                                                                                               
  <script>                                                                                                                                                                                                                                                     
    function setEvent(aDirection) {                                                                                                                                                                                                                            
       if (aDirection == 0)                                                                                                                                                                                                                                    
          gEventStr = 'left';                                                                                                                                                                                                                                  
       else                                                                                                                                                                                                                                                    
          gEventStr = 'right';                                                                                                                                                                                                                                 
    }                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
    var playControl = {                                                                                                                                                                                                                                        
    showSnake: function* ( xJsonArgs, xCmdArgs ) {                                                                                                                                                                                                             
        var xElements = xJsonArgs.updnew.elements;                                                                                                                                                                                                             
        if ( xElements.length < 2 ) {                                                                                                                                                                                                                          
           return;                                                                                                                                                                                                                                             
        }                                                                                                                                                                                                                                                      
        xJsonArgs.update();                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
        var xJsnLoop = {                                                                                                                                                                                                                                       
           "callback" : {                                                                                                                                                                                                                                      
               "aExample.get_segments" : {'event': gEventStr }                                                                                                                                                                                                 
           },                                                                                                                                                                                                                                                  
           "update"   : {                                                                                                                                                                                                                                      
               "aPlayboard.script"     : {                                                                                                                                                                                                                     
                   "playControl.showSnake[:]" : {}                                                                                                                                                                                                             
               },                                                                                                                                                                                                                                              
               "aPlayboard.innerHTML"  : "*"                                                                                                                                                                                                                   
           }                                                                                                                                                                                                                                                   
        };                                                                                                                                                                                                                                                     
        var xLoop     = JSON.stringify(xJsnLoop);                                                                                                                                                                                                              
        eezzWebSocket.send( xLoop );                                                                                                                                                                                                                           
        gEventStr     = "";                                                                                                                                                                                                                                    
        var xCallback = "{'callback':{'aExample.get_segments':{}}, 'update'  :{'aPlayboard.script' :{'playControl.showSnake[:]':{} }}}";                                                                                                                       
      }                                                                                                                                                                                                                                                        
    }                                                                                                                                                                                                                                                          
                                                                                                                                                                                                                                                               
  </script>                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                               
</head>                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                               
<body>                                                                                                                                                                                                                                                         
  <h1>ABAP Snake</h1>                                                                                                                                                                                                                                          
  <div name="aExample" data-eezz-action="{'eezzAgent.assign':{'ZCL_SNAKE':{'event':''}}}">                                                                                                                                                                     
                                                                                                                                                                                                                                                               
    <table name="aPlayboard" style=" border: 1px solid black; width:900px; height:900px"                                                                                                                                                                       
      data-eezz-action  = "{'eezzAgent.assign':{'aExample.get_segments':{}},                                                                                                                                                                                   
                            'update'          :{'aPlayboard.script'       :{'playControl.showSnake[:]':{} }}}"                                                                                                                                                 
      data-current-file = "{selected_entry}"                                                                                                                                                                                                                   
      data-nav-prev     = "{table_prev}"                                                                                                                                                                                                                       
      data-nav-pos      = "{table_pos}"                                                                                                                                                                                                                        
      data-nav-next     = "{table_next}"                                                                                                                                                                                                                       
      data-nav-last     = "{table_last}"                                                                                                                                                                                                                       
      data-nav-top      = "{table_top}"                                                                                                                                                                                                                        
      data-nav-current  = "{table_current}">                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
      <tbody class="eezzTableBody" style="position:relative; width:900px; height:900px; display:block; border:1px solid red">                                                                                                                                  
        <tr data-eezz-template = "{'table-rows'    :{'tiles':8}}">                                                                                                                                                                                             
          <td data-eezz-template   = "{'table-columns':[':']}"                                                                                                                                                                                                 
              data-eezz-attributes = "{'style':'position:absolute; width:10px; height:10px; overflow:hidden;left:{c_posx}px; top:{C_POSY}px'}">                                                                                                                
            <div style             = "position:relative; width:10px; height:10px; background-color: powderblue">                                                                                                                                               
              <div style="position:absolute; left:10px; top:5px" >x: {c_posx}</div>                                                                                                                                                                            
              <div style="position:absolute; left:10px; top:32px">y: {c_posy}</div></div></td></tr></tbody>                                                                                                                                                    
                                                                                                                                                                                                                                                               
      <tfoot>                                                                                                                                                                                                                                                  
         <input type="button" value="left"  onclick="setEvent(0)">                                                                                                                                                                                             
         <input type="button" value="right" onclick="setEvent(1)">                                                                                                                                                                                             
      </tfoot>                                                                                                                                                                                                                                                 
    </table>                                                                                                                                                                                                                                                   
                                                                                                                                                                                                                                                               
</div>                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                               
  <!-- Status output -->                                                                                                                                                                                                                                       
  <table data-eezz-template="database" name="StatusLine">                                                                                                                                                                                                      
    <tbody>                                                                                                                                                                                                                                                    
      <tr data-eezz-template="{'table-rows':[':']}">                                                                                                                                                                                                           
        <td data-eezz-template="{'table-columns':[':']}">{}</td></tr></tbody></table>                                                                                                                                                                          
                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                               
</body>                                                                                                                                                                                                                                                        
</html>                                                                                                                                                                                                                                                        